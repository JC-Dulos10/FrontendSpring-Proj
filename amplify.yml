version: 1
applications:
  - appRoot: .
    frontend:
      phases:
        preBuild:
          commands:
            - npm install
        build:
          commands:
            - npm run build
            - npm run export  # Exports the static site
        postBuild:
          commands:
            - ls -alh  # Optional: to list the files in the output directory
    artifacts:
      baseDirectory: out  # This is the directory generated by next export
      files:
        - '**/*'  # Deploy all files in the out directory
    cache:
      paths:
        - node_modules/**/*
